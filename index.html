<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Monthly Expense Tracker</title>

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family: Arial;
}

body{
  background: linear-gradient(135deg,#1e3c72,#2a5298);
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
}

.container{
  background:#fff;
  width:95%;
  max-width:420px;
  padding:20px;
  border-radius:15px;
  box-shadow:0 15px 30px rgba(0,0,0,0.2);
}

h2{
  text-align:center;
  margin-bottom:5px;
}

#monthName{
  text-align:center;
  margin-bottom:10px;
  font-size:14px;
  color:#555;
}

.total-box{
  background:#2a5298;
  color:#fff;
  padding:12px;
  border-radius:10px;
  text-align:center;
  margin-bottom:10px;
}

.daily-box{
  background:#ff9800;
  color:#fff;
  padding:10px;
  border-radius:8px;
  text-align:center;
  margin-bottom:15px;
}

input{
  width:100%;
  padding:10px;
  margin:6px 0;
  border-radius:8px;
  border:1px solid #ccc;
}

button{
  width:100%;
  padding:10px;
  border:none;
  border-radius:8px;
  background:#1e3c72;
  color:#fff;
  cursor:pointer;
}

ul{
  list-style:none;
  margin-top:15px;
}

li{
  background:#f2f2f2;
  padding:10px;
  margin:6px 0;
  border-radius:8px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.left{
  display:flex;
  flex-direction:column;
}

.date{
  font-size:12px;
  color:gray;
}

.delete-btn{
  width:30px;
  height:30px;
  border:none;
  border-radius:50%;
  background:#ff4b2b;
  color:#fff;
  font-size:18px;
  font-weight:bold;
  cursor:pointer;

  display:flex;
  align-items:center;
  justify-content:center;

  padding:0;
  line-height:1;
  transition:0.2s ease;
}

.delete-btn:hover{
  transform:scale(1.1);
  background:#e63c1f;
}
</style>
</head>

<body>

<div class="container">
  <h2>ðŸ’° Monthly Expense</h2>
  <h3 id="monthName"></h3>

  <div class="total-box">
    Monthly Total: â‚¹ <span id="monthTotal">0</span>
  </div>

  <div class="daily-box">
    Today's Total: â‚¹ <span id="dailyTotal">0</span>
  </div>

  <input type="text" id="desc" placeholder="Expense Name">
  <input type="number" id="amount" placeholder="Amount">
  <button onclick="addExpense()">Add Expense</button>

  <ul id="list"></ul>
</div>

<script>

// Current Date
const now = new Date();
const currentMonth = now.getMonth();
const currentYear = now.getFullYear();

const storageKey = "expenses_" + currentMonth + "_" + currentYear;
const monthTotalKey = "monthTotal_" + currentMonth + "_" + currentYear;
const dailyTotalKey = "dailyTotal_" + currentMonth + "_" + currentYear;

// Month Name
const monthNames = [
  "January","February","March","April","May","June",
  "July","August","September","October","November","December"
];

document.getElementById("monthName").innerText =
  monthNames[currentMonth] + " " + currentYear;

// Reset on new month
const savedMonth = localStorage.getItem("savedMonth");
const savedYear = localStorage.getItem("savedYear");

if(savedMonth != currentMonth || savedYear != currentYear){
  localStorage.clear();
  localStorage.setItem("savedMonth", currentMonth);
  localStorage.setItem("savedYear", currentYear);
}

// Load Data
let expenses = JSON.parse(localStorage.getItem(storageKey)) || [];
let monthTotal = Number(localStorage.getItem(monthTotalKey)) || 0;
let dailyTotal = Number(localStorage.getItem(dailyTotalKey)) || 0;

const list = document.getElementById("list");
const monthTotalEl = document.getElementById("monthTotal");
const dailyTotalEl = document.getElementById("dailyTotal");

function getTodayDate(){
  const today = new Date();
  return String(today.getDate()).padStart(2,'0') + "/" +
         String(today.getMonth()+1).padStart(2,'0') + "/" +
         today.getFullYear();
}

function render(){
  list.innerHTML = "";

  expenses.forEach((item,index)=>{

    let li = document.createElement("li");

    li.innerHTML = `
      <div class="left">
        <strong>${item.desc}</strong>
        <span class="date">ðŸ“… ${item.date}</span>
      </div>

      <div style="display:flex;align-items:center;gap:10px;">
        <span>â‚¹${item.amount}</span>
        <button class="delete-btn" onclick="deleteExpense(${index})">âœ•</button>
      </div>
    `;

    list.appendChild(li);
  });

  monthTotalEl.innerText = monthTotal;
  dailyTotalEl.innerText = dailyTotal;

  localStorage.setItem(storageKey, JSON.stringify(expenses));
  localStorage.setItem(monthTotalKey, monthTotal);
  localStorage.setItem(dailyTotalKey, dailyTotal);
}

function addExpense(){
  let desc = document.getElementById("desc").value;
  let amount = document.getElementById("amount").value;

  if(desc === "" || amount === ""){
    alert("Fill all fields");
    return;
  }

  const formattedDate = getTodayDate();

  expenses.push({
    desc: desc,
    amount: Number(amount),
    date: formattedDate
  });

  monthTotal += Number(amount);
  dailyTotal += Number(amount);

  document.getElementById("desc").value="";
  document.getElementById("amount").value="";

  render();
}

function deleteExpense(index){
  expenses.splice(index,1);
  render(); // totals remain same
}

render();

</script>

</body>
</html>